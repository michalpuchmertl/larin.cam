(this["webpackJsonplarin.cam"]=this["webpackJsonplarin.cam"]||[]).push([[0],{116:function(e,t,n){},225:function(e,t){},239:function(e,t,n){},242:function(e,t,n){"use strict";n.r(t);var a,s=n(3),c=n.n(s),r=n(101),i=n.n(r),o=(n(116),n(24)),u=n(17),l=n(53),j=n(19),d=n(11),m=n.n(d),b=n(23),h=n(29),p=n(56),O=n(57),f=O.a().shape({username:O.b().email().required("Username is a required field."),password:O.b().min(6,"Password must be at least 6 characters long.").required("Password is a required field.")}),x=n(44),v={apiKey:"AIzaSyCDN0Hii6Mznt2Y_DaRprMWVn7kwR9-xlY",authDomain:"larincam.firebaseapp.com",projectId:"larincam",storageBucket:"larincam.appspot.com",messagingSenderId:"70794209044",appId:"1:70794209044:web:1f0ccefcdfb498f5fcc401"};function g(){return"undefined"!==typeof window?a||(a=x.a.initializeApp(v)):null}var w=n(6),N=Object(s.createContext)(null);var y=function(e){var t=e.children,n=Object(s.useState)(null),a=Object(u.a)(n,2),c=a[0],r=a[1];return Object(w.jsx)(N.Provider,{value:{currentUser:c,setCurrentUser:r},children:t})};var S=function(e){var t=Object(s.useContext)(N),n=Object(j.g)(),a=g(),c={mode:"onSubmit",reValidateMode:"onChange",resolver:Object(p.a)(f)},r=Object(h.d)(c),i=r.handleSubmit,l=r.register,d=Object(s.useState)(!1),O=Object(u.a)(d,2),x=(O[0],O[1]),v=function(){var e=Object(b.a)(m.a.mark((function e(s){var c,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),c=s.username,r=s.password,a.auth().signInWithEmailAndPassword(c,r).then((function(e){x(!1),console.log(e);var a=e.user;t.setCurrentUser(a),n.push("/")})).catch((function(e){console.error(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(s.useState)({authenticated:!1,initializing:!0}),S=Object(u.a)(y,2),A=S[0],C=S[1];return Object(s.useEffect)((function(){return a.auth().onAuthStateChanged((function(e){console.log("USER",e),C(e?{authenticated:!0,initializing:!1}:{authenticated:!1,initializing:!1})}))}),[C]),A.authenticated?Object(w.jsx)(j.a,{to:"/"}):Object(w.jsxs)("div",{className:"container",children:[Object(w.jsx)("h1",{children:"Sign in"}),Object(w.jsxs)("form",{action:"",onSubmit:i((function(e){var t=e.password,n=e.username;v({username:n,password:t})})),className:"mt-3 col-12 col-md-5 mx-auto",children:[Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"username",children:"Email"}),Object(w.jsx)("input",Object(o.a)(Object(o.a)({},l("username")),{},{type:"text",name:"username",className:"form-control rounded mt-2",id:"username"}))]}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"password",children:"Password"}),Object(w.jsx)("input",Object(o.a)(Object(o.a)({},l("password",{minLength:{value:6,message:"Password length must be at least 6 characters"}})),{},{type:"password",name:"password",className:"form-control rounded mt-2",id:"password"}))]}),Object(w.jsx)("button",{className:"btn btn-primary mt-4 w-100",type:"submit",children:"Register"})]})]})},A=n(111),C=(n(237),n(238),function(e){var t=c.a.useRef(null),n=e.options,a=function(e){return Object(w.jsx)("div",{"data-vjs-player":!0,children:Object(w.jsx)("video",{ref:t,className:"video-js vjs-theme-city vjs-big-play-centered",crossOrigin:"anonymous"})})};return c.a.useEffect((function(){var e,a=t.current;return a&&(e=Object(A.a)(a,n,(function(){}))),function(){e&&e.dispose()}}),[n]),Object(w.jsx)(a,{})}),E=[{username:"Michal",message:"comment",time:"16:54",photoUrl:"https://joyonlineschool.com/static/emptyuserphoto.png"}];var R=function(e){return Object(w.jsxs)("div",{className:"chat",children:[Object(w.jsx)("h1",{children:"Chat"}),Object(w.jsx)("div",{className:"messages",children:E.map((function(e){var t=e.username,n=e.message,a=(e.time,e.photoUrl);return Object(w.jsxs)("div",{className:"message d-flex mb-3 align-items-center",children:[Object(w.jsx)("img",{src:a,alt:"",className:"me-2"}),Object(w.jsxs)("div",{className:"d-flex flex-column align-items-start",children:[Object(w.jsx)("span",{className:"username",children:t}),Object(w.jsx)("p",{className:"message-text",children:n})]})]})}))})]})};n(239);var k=function(e){g();var t=Object(s.useState)(null),n=Object(u.a)(t,2),a=n[0],c=n[1];Object(s.useEffect)((function(){fetch("https://larin.cam/issue-stream-url",{method:"GET",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Headers":"*"}}).then((function(e){e.json().then((function(e){c(e)}))}))}),[]),console.log("SRC",a);var r={autoplay:!0,controls:!0,responsive:!0,liveui:!0,fluid:!0,sources:[{src:a,type:"application/x-mpegURL"}]};return a?Object(w.jsxs)("div",{className:"container",children:["Livestream",Object(w.jsxs)("div",{className:"row",children:[Object(w.jsx)("div",{className:"col-12 col-lg-9",children:Object(w.jsx)("div",{className:"video-wrapper",children:Object(w.jsx)(C,{options:r})})}),Object(w.jsx)("div",{className:"col-12 col-lg-3",children:Object(w.jsx)(R,{})})]})]}):Object(w.jsx)("div",{children:"Loading..."})};n(240);var z=function(e){var t={mode:"onSubmit",reValidateMode:"onChange",resolver:Object(p.a)(f)},n=Object(h.d)(t),a=n.handleSubmit,c=n.register,r=Object(s.useState)(!1),i=Object(u.a)(r,2),l=(i[0],i[1],function(){var e=Object(b.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.username,a=t.password,x.a.auth().createUserWithEmailAndPassword(n,a).then((function(e){e.user})).catch((function(e){console.error(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(w.jsxs)("div",{className:"container",children:[Object(w.jsx)("h1",{children:"Join our community"}),Object(w.jsxs)("form",{action:"",onSubmit:a((function(e){var t=e.password,n=e.username;l({username:n,password:t})})),className:"mt-3 col-12 col-md-5 mx-auto",children:[Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"username",children:"Email"}),Object(w.jsx)("input",Object(o.a)(Object(o.a)({},c("username")),{},{type:"text",name:"username",className:"form-control rounded mt-2",id:"username"}))]}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"password",children:"Password"}),Object(w.jsx)("input",Object(o.a)(Object(o.a)({},c("password",{minLength:{value:6,message:"Password length must be at least 6 characters"}})),{},{type:"password",name:"password",className:"form-control rounded mt-2",id:"password"}))]}),Object(w.jsx)("button",{className:"btn btn-primary mt-4 w-100",type:"submit",children:"Register"})]})]})},U=[{path:"/",key:"ROOT",exact:!0,protected:!0,component:function(){return Object(w.jsx)(k,{})}},{path:"/login",key:"LOGIN",exact:!0,component:function(){return Object(w.jsx)(S,{})}},{path:"/register",key:"REGISTER",exact:!0,component:function(){return Object(w.jsx)(z,{})}},{path:"/admin",key:"ADMIN",exact:!0,protected:!0,component:function(){return Object(w.jsx)(k,{})}}];function I(e){var t=e.routes,n=g(),a=Object(s.useState)({authenticated:!1,initializing:!0}),c=Object(u.a)(a,2),r=c[0],i=c[1];return Object(s.useEffect)((function(){return n.auth().onAuthStateChanged((function(e){console.log("USER",e),i(e?{authenticated:!0,initializing:!1}:{authenticated:!1,initializing:!1})}))}),[i]),r.initializing?Object(w.jsx)("div",{children:"Loading..."}):Object(w.jsx)(l.a,{children:Object(w.jsxs)(j.d,{children:[t.map((function(e,t){return e.protected?r?Object(w.jsx)(j.b,{path:e.path,exact:e.exact,render:function(t){return Object(w.jsx)(e.component,Object(o.a)(Object(o.a)({},t),{},{routes:e.routes}))}}):Object(w.jsx)(j.a,{to:"/login"}):Object(w.jsx)(j.b,{path:e.path,exact:e.exact,render:function(t){return Object(w.jsx)(e.component,Object(o.a)(Object(o.a)({},t),{},{routes:e.routes}))}})})),Object(w.jsx)(j.b,{component:function(){return Object(w.jsx)("h1",{children:"404 - Not Found!"})}})]})})}n(241);var P=function(){return Object(w.jsx)("div",{className:"App",children:Object(w.jsx)(y,{children:Object(w.jsx)(I,{routes:U})})})};i.a.render(Object(w.jsx)(P,{}),document.getElementById("root"))}},[[242,1,2]]]);
//# sourceMappingURL=main.0694b294.chunk.js.map